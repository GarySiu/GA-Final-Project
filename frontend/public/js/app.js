function setMagnetListHeight(){$magnetList.css("height",$(window).height()-325)}function buildAreaInit(){$(function(){$buildArea.sortable({receive:function(t,e){updateTweetText(),e.item.draggable("destroy")},over:function(){removeIntent=!1},out:function(){removeIntent=!0},beforeStop:function(t,e){if(1==removeIntent){var n=e.item.detach();updateTweetText(),$magnetList.append(n),n.draggable({cursor:"-webkit-grabbing",stack:"#magnet-list li",connectToSortable:"#build-area",scroll:!1}),n.css("left",t.pageX-e.item.width()/2),n.css("top",t.pageY-156+e.item.height()/2)}}})})}function updateTweetText(){var t=$buildArea.sortable("toArray",{attribute:"data-text"}).join(" ");updateCharCount(t.length),t=encodeURIComponent(t),$tweetButton.attr("href","https://twitter.com/intent/tweet?text="+t)}function updateCharCount(t){$charCount.html(140-t)}function setListeners(){$searchButton.on("click",function(){event.preventDefault(),getMagnets()}),$(window).on("resize",setMagnetListHeight)}function getMagnets(){$.get("http://localhost:3000/search?type=twitter&q="+encodeURIComponent($searchBox.val())).done(function(t){$magnetList.empty(),$buildArea.empty(),$charCount.html(140);var e=t;$.each(e,function(t,e){var n='<li data-text="'+e+'">'+e+"</li>";$magnetList.append(n)}),$(function(){$("li").draggable({cursor:"-webkit-grabbing",containment:$magnetList,stack:"#magnet-list li",connectToSortable:"#build-area",scroll:!1}),$.each($("li"),function(t,e){$(e).css("left",Math.floor(Math.random()*$(window).width())-$(e).width()),$(e).css("top",Math.floor(Math.random()*$magnetList.height())-$(e).height())})})})}$(document).ready(function(){$magnetList=$("#magnet-list"),$searchBox=$("#search-box"),$searchButton=$("#search-button"),$buildArea=$("#build-area"),$tweetButton=$("#tweet-button"),$charCount=$("#char-count"),setListeners(),setMagnetListHeight(),getMagnets(),buildAreaInit()});